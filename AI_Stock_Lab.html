<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Stock Lab ‚Äì Vietnam</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
font-family:Inter,sans-serif;
background:#0f172a;
color:white;
margin:0;
padding:20px;
}

.card{
background:#1e293b;
padding:20px;
border-radius:16px;
margin-bottom:20px;
}

input,button{
padding:10px;
border-radius:8px;
border:none;
margin:5px 0;
}

button{
background:#6366f1;
color:white;
cursor:pointer;
}

h2{margin-top:0}
.green{color:#22c55e}
.red{color:#ef4444}
</style>
</head>

<body>

<h1>üìà AI Stock Lab (Gi·∫£ l·∫≠p ƒë·∫ßu t∆∞ Vi·ªát Nam)</h1>

<div class="card">
<h2>Ph√¢n t√≠ch c·ªï phi·∫øu</h2>
<input id="symbol" placeholder="Nh·∫≠p m√£ (VD: FPT)">
<button onclick="analyze()">Ph√¢n t√≠ch AI</button>
<div id="analysis"></div>
</div>

<div class="card">
<canvas id="chart"></canvas>
</div>

<div class="card">
<h2>Gi·∫£ l·∫≠p ƒë·∫ßu t∆∞</h2>
<p>V·ªën hi·ªán t·∫°i: <span id="capital"></span> VNƒê</p>
<p>ƒêang s·ªü h·ªØu: <span id="shares">0</span> c·ªï phi·∫øu</p>
<input id="quantity" type="number" placeholder="S·ªë l∆∞·ª£ng mua/b√°n">
<button onclick="buy()">Mua</button>
<button onclick="sell()">B√°n</button>
<p id="portfolio"></p>
</div>

<script>
let capital=100000000; // 100 tri·ªáu gi·∫£ l·∫≠p
let shares=0;
let currentPrice=0;
let chart;

document.getElementById("capital").innerText=capital.toLocaleString();

function analyze(){

let symbol=document.getElementById("symbol").value.toUpperCase();
if(!symbol) return alert("Nh·∫≠p m√£ c·ªï phi·∫øu");

let prices=[];
let base=50000+Math.random()*30000;

for(let i=0;i<12;i++){
base+= (Math.random()-0.4)*5000;
prices.push(Math.round(base));
}

currentPrice=prices[prices.length-1];

let trend="Sideway";
if(prices[11]>prices[0]) trend="Uptrend";
if(prices[11]<prices[0]) trend="Downtrend";

document.getElementById("analysis").innerHTML=
`
<b>M√£:</b> ${symbol}<br>
<b>Gi√° hi·ªán t·∫°i:</b> ${currentPrice.toLocaleString()} VNƒê<br>
<b>Xu h∆∞·ªõng:</b> ${trend}<br>
<b>Khuy·∫øn ngh·ªã h·ªçc t·∫≠p:</b> Lu√¥n ƒë·∫∑t stop-loss 7‚Äì10%.
`;

drawChart(prices);
}

function drawChart(prices){

const ctx=document.getElementById("chart");

if(chart) chart.destroy();

chart=new Chart(ctx,{
type:"line",
data:{
labels:["T1","T2","T3","T4","T5","T6","T7","T8","T9","T10","T11","T12"],
datasets:[{
label:"Gi√° c·ªï phi·∫øu (gi·∫£ l·∫≠p)",
data:prices,
borderColor:"#6366f1",
tension:0.3
}]
}
});
}

function buy(){

let qty=parseInt(document.getElementById("quantity").value);
if(!qty || currentPrice===0) return;

let cost=qty*currentPrice;

if(cost>capital){
alert("Kh√¥ng ƒë·ªß v·ªën");
return;
}

capital-=cost;
shares+=qty;

updatePortfolio();
}

function sell(){

let qty=parseInt(document.getElementById("quantity").value);
if(!qty || qty>shares) return;

capital+=qty*currentPrice;
shares-=qty;

updatePortfolio();
}

function updatePortfolio(){

document.getElementById("capital").innerText=capital.toLocaleString();
document.getElementById("shares").innerText=shares;

let total=capital + shares*currentPrice;
let profit=total-100000000;

document.getElementById("portfolio").innerHTML=
"T·ªïng t√†i s·∫£n: "+total.toLocaleString()+" VNƒê<br>"+
"L√£i/L·ªó: <span class='"+(profit>=0?"green":"red")+"'>"+
profit.toLocaleString()+" VNƒê</span>";
}
</script>

</body>
</html>
